oke sekalian saja update informasi untuk claude.md
jadi begini, 
1. ya ini development, ketika pindah production memang akan di pisah. saya juga akan membuat
pyproject per service dan akan tetap menggunakan poetry sebagai package management
2. shared modules sebetulnya nanti saya hanya isikan konfigurasi untuk logging, enkripsi dan dekripsi saja sih
rencana saya adalah membuat module enkrip dekrip (saya tetap gunakan argon2 di beberapa tempat) untuk beberapa case
internal.
3. database, ya saya akan pisahkan database perservice itu tenang saja hanya saja 3 folder/service saat ini berhubungan dengan
user management, jadi menurut saya untuk 3 folder ini bisa shared database(karna sama sama user managementr)
4. interservice komunikasi (selain 3 main app ini) akan gunakan grpc, namun untuk 3 app ini akan gunakan function calling saja.
5. testing akan di lakukan dan di berikan treatment perservice


----update---
1. oke pertama saya lupa mention satu hal, saya lupa saya sudah update projectstructures
silahkan anda update juga untuk claude.md
2. saya akan gunakan aturan, ini untuk frontend dan backend
- nama folder pascal-case
- nama file camelcase
- nama function camelcase
3. untuk file akan di labeli di belakangnya
-misal untuk sebuah interface akan di berikan sufix *Interface example : UserInterface.py|UserInterface.tsx
4. oke encrypt dan decrypt akan gunakan RUST saya ingin module internal encrypt decrypt yang akan di simpan di shared/ yang ada di root. sehingga semua service bisa gunakan ini
5. sudah saya katakan , modular monolith hanya untuk 3 main app, sedangkan untuk app yang lain akan gunakan rest. ini hanya environtment development saja
tambah keterangan di calude.md agar tidak melakukan modular monolith untuk selain 3 main app yang berkaitan dengan user management
6. oke update, karna disini saya akan gunakan sqlmodel, jadi di domain saya akan gunakan sqlmodel, jadi untuk model akan gunakan sqlmodel yang sama agar tidak terjadi boilerplate
7. redis untuk temporary data bro, cache, session, dan juga pub/sub dan ini shared
8. aku belum bikin grpc nya masih gatau caranya


--update--
1. oke auditlog ada di userlog,
2. security,applicationlog, performance log, errorlog ini ada di system log cuma bedain label type nya aja
3. dan aku prefer ke json output buat log nya, disana ada keterangannya berikut ms, dan juga label dan pesaannya aja (buat error harus detail errornya apa)
4. oke orkestrasti di root buat 3 service ini bakal pake nginx??? rekomen ga?? butuh approach ini
5. kok pake pkdf2??? kan aku pake argon2??
6. oke bisa update claude.md?? dengan tambahan info juga, aturan main bener bener harus maksimalin penggunaan pydantic-settings, fastapimiddleware, fastapicors intinya ga native lah
7. ya buat rust aku setuju, intinya harus bisa di pake aja 

4 Missing Factory Components:                                                                       
                                                                                                      
  1. Request ID Middleware ‚ùå                                                                         
                                                                                                      
  What: Middleware yang auto-generate/forward request_id                                              
  Why: Buat distributed tracing (nginx ‚Üí backend ‚Üí database logs semua punya request_id sama)         
  Where: shared/backend/middleware/requestIdMiddleware.py                                             
                                                                                                      
  Example flow:                                                                                       
  Request ‚Üí Nginx (buat request_id) ‚Üí FastAPI Middleware (bind context) ‚Üí Logs semua include          
  request_id                                                                                          
                                                                                                      
  ---                                                                                                 
  2. Exception Handlers + Error Response Factory ‚ùå                                                   
                                                                                                      
  What: Standardized error response format + custom exception classes                                 
  Why: Sekarang kalo error, FastAPI return default error. Harusnya return structured JSON yang        
  konsisten                                                                                           
  Where:                                                                                              
  - shared/backend/exceptions/errorResponse.py (factory)                                              
  - shared/backend/exceptions/baseException.py (custom exceptions)                                    
                                                                                                      
  Example output:                                                                                     
  {                                                                                                   
    "error": {                                                                                        
      "code": "USER_NOT_FOUND",                                                                       
      "message": "User with email not found",                                                         
      "field": "email"                                                                                
    },                                                                                                
    "request_id": "req-123",                                                                          
    "timestamp": "2026-02-03T10:30:45Z"                                                               
  }                                                                                                   
                                                                                                      
  ---                                                                                                 
  3. Wire Lifecycle Hooks ke Server Files ‚ùå                                                          
                                                                                                      
  What: Panggil initDb(), initRedis(), setupLogging() di startup                                      
  Why: Functions udah ada tapi BELUM DIPAKE di admin_server.py & public_server.py                     
  Where: Update admin_server.py & public_server.py                                                    
                                                                                                      
  Current state:                                                                                      
  # admin_server.py - KOSONG!                                                                         
  app = FastAPI(title='Admin Server')                                                                 
  # ‚ùå NO startup/shutdown hooks                                                                      
                                                                                                      
  Should be:                                                                                          
  @app.on_event("startup")                                                                            
  async def startup():                                                                                
      setupLogging()                                                                                  
      await initDb()                                                                                  
      await initRedis()                                                                               
                                                                                                      
  @app.on_event("shutdown")                                                                           
  async def shutdown():                                                                               
      await closeDb()                                                                                 
      await closeRedis()                                                                              
                                                                                                      
  ---                                                                                                 
  4. Unified Health Check Endpoint ‚ùå                                                                 
                                                                                                      
  What: Endpoint /health yang check status DB, Redis, Crypto                                          
  Why: Monitoring & debugging - tau component mana yang down                                          
  Where: shared/backend/health/healthCheck.py + wired to both servers                                 
                                                                                                      
  Example response:                                                                                   
  {                                                                                                   
    "status": "healthy",                                                                              
    "checks": {                                                                                       
      "database": {"status": "up", "latency_ms": 5},                                                  
      "redis": {"status": "up", "latency_ms": 2},                                                     
      "crypto": {"status": "up"}                                                                      
    },                                                                                                
    "timestamp": "2026-02-03T10:30:45Z"                                                               
  }                                                                                                   
                                                                                                      
  ---                                                                                                 
  Estimasi total: 20-25 menit untuk complete semua.                                                   
                                                                                                      
  Mau mulai dari mana? Gue suggest urutan:                                                            
  1. Exception Handlers (foundation)                                                                  
  2. Request ID Middleware                                                                            
  3. Wire Lifecycle Hooks                                                                             
  4. Health Check


  Summary Hari Ini (COMPLETE):                                                                        
                                                                                                      
  ‚úÖ Infrastructure Factory (95% Done):                                                               
                                                                                                      
  1. Phase 1: Config & Settings ‚úÖ                                                                    
  2. Phase 2: Logging (Enhanced) + UUID7 ‚úÖ                                                           
  3. Phase 3: Database + Redis + Base Repository ‚úÖ                                                   
  4. Phase 4: Rust Crypto Module ‚úÖ                                                                   
  5. Phase 6: Nginx + OpenResty + Rate Limiting + Honeypot "Nice Try, Diddy!" ‚úÖ                      
  6. .gitignore: Updated (Rust, nginx logs) ‚úÖ                                                        
  7. CLAUDE.md: Enhanced dengan shared/ inventory & Rust install guide ‚úÖ                             
                                                                                                      
  ---                                                                                                 
  Besok Tinggal Complete (4 Items):                                                                   
                                                                                                      
  1. Request ID Middleware - Distributed tracing                                                      
  2. Exception Handlers + Error Response - Standardized error format                                  
  3. Wire Lifecycle Hooks - Connect initDb/initRedis ke servers                                       
  4. Health Check Endpoint - Monitoring DB/Redis/Crypto                                               
                                                                                                      
  Estimasi: 20-25 menit untuk selesaiin semua.                                                        
                                                                                                      
  ---                                                                                                 
  Setelah itu ‚Üí SIAP main application (KAuthApp, KSysAdmin, KSysPayment)! üöÄ